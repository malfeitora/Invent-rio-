<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Menu RPG - Inventário</title>
  <style>
    body {
      margin: 0;
      background: #1a1a1a;
      color: #fff;
      font-family: 'Garamond', serif;
      background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSxMLGjeGn1wJM5aSRVmyYgbdbsKiy3xcZRDA1FlgQx3uo0_uA5fLn1c5Q&s=10');
      background-size: cover;
      background-attachment: fixed;
    }
    .menu {
      padding: 20px;
      text-align: center;
    }
    .menu button {
      font-size: 24px;
      padding: 10px 20px;
      cursor: pointer;
      background: #3b2f2f;
      color: #f0d28a;
      border-radius: 10px;
      margin: 10px;
    }
    .inventory {
      display: none;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    .slot-row {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
      gap: 10px;
    }
    .slot {
      width: 64px;
      height: 64px;
      background: #333;
      border: 2px solid #c2a94e;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }
    .slot img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .hidden-file-input {
      display: none;
    }
    .flagelo-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 30px;
    }
    .fala {
      font-style: italic;
      font-size: 18px;
      max-width: 300px;
      margin-left: 20px;
    }
    #chatContainer {
      display: none;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    #chatBox {
      width: 90%;
      max-width: 400px;
      height: 200px;
      background: rgba(0,0,0,0.6);
      border: 1px solid #c2a94e;
      padding: 10px;
      overflow-y: auto;
      margin-bottom: 10px;
    }
    #playerInput {
      width: 90%;
      max-width: 400px;
      padding: 10px;
      border-radius: 5px;
      border: none;
    }
    .options button {
      background: #3b2f2f;
      color: #f0d28a;
      border-radius: 5px;
      margin: 5px;
      padding: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="menu">
    <button onclick="abrirInventario()">INVENTARIO</button>
    <button onclick="abrirConversa()">CONVERSAR COM A FLAGELO SOLAR</button>
  </div>

  <div class="inventory" id="inventario">
    <div class="flagelo-container">
      <div class="fala" id="falaFlagelo"></div>
    </div>
    <div id="slots"></div>
  </div>

  <div id="chatContainer">
    <div id="chatBox"></div>
    <div class="options">
      <button onclick="responder('quem é você')">Quem é você?</button>
      <button onclick="responder('como posso te encontrar')">Como posso te encontrar?</button>
      <button onclick="responder('o que você faz')">O que você faz?</button>
      <button onclick="responder('o que é esse lugar')">O que é esse lugar?</button>
    </div>
  </div>

  <script>
    const falaList = [
      "Você encontrou novos itens?", "O vazio guarda segredos...", "A escuridão observa...",
      "Você ouviu o sussurro das estrelas?", "Itens esquecidos, poder oculto.",
      "A poeira dos antigos cobre esse artefato...", "Suas mãos estão sujas de ambição?",
      "Há magia em cada canto deste mundo.", "Tolos correm atrás de poder...",
      "Lembre-se, o silêncio fala mais que mil espadas.",
      "Carregue apenas o necessário. O resto é peso.",
      "Uma sombra se arrasta atrás de você.", "Você me escuta? Ou apenas me sente?",
      "O tempo dobra-se aos que dominam o desconhecido.", "Toque apenas o que aceita ser tocado.",
      "A estrela negra sussurrou seu nome...", "Queimou a essência de um deus, não foi?",
      "O frio aqui não é deste mundo.", "Há algo errado neste item...",
      "Seu bolso está mais cheio que sua alma.", "Guarde o que não pode ser visto.",
      "Não tema a perda, tema o ganho.", "Tudo que brilha sangra na luz.",
      "Você tem coragem... ou apenas sorte?", "Você sabe o preço de carregar isso?",
      "O som do metal... tão reconfortante.", "Não desperdice aquilo que foi selado.",
      "Você é digno deste poder?", "As estrelas guiam, mas não perdoam.",
      "Há beleza até nas maldições..."
    ];

    // Função para abrir o inventário
    function abrirInventario() {
      const inv = document.getElementById("inventario");
      inv.style.display = "flex";  // Mostra o inventário
      document.getElementById("falaFlagelo").textContent = falaList[Math.floor(Math.random() * falaList.length)];
    }

    // Função para abrir o chat de conversa com a Flagelo
    function abrirConversa() {
      const chat = document.getElementById("chatContainer");
      chat.style.display = "flex";  // Mostra o chat
    }

    // Função de resposta da Flagelo baseada na opção selecionada
    function responder(opcao) {
      const chatBox = document.getElementById("chatBox");
      const resposta = document.createElement("div");

      switch (opcao) {
        case 'quem é você':
          resposta.textContent = "Eu sou a Flagelo Solar, guardiã do vazio.";
          break;
        case 'como posso te encontrar':
          resposta.textContent = "Você já me encontrou, Maculado. Estou em todos os lugares e em nenhum.";
          break;
        case 'o que você faz':
          resposta.textContent = "Eu observo o que se esconde nas sombras e guio aqueles que buscam poder.";
          break;
        case 'o que é esse lugar':
          resposta.textContent = "Este é o limbo, o entre-lugar entre mundos, onde os esquecidos repousam.";
          break;
        default:
          resposta.textContent = "Eu não entendi sua pergunta, Maculado. Fale mais claro.";
      }

      chatBox.appendChild(resposta);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Função para atualizar a frase da Flagelo a cada 60 segundos
    function atualizarFrase() {
      const fala = document.getElementById("falaFlagelo");
      if (fala) {
        fala.textContent = falaList[Math.floor(Math.random() * falaList.length)];
      }
    }

    setInterval(atualizarFrase, 60000); // A cada 60 segundos

    // Gerar os slots do inventário
    const container = document.getElementById("slots");
    for (let i = 0; i < 10; i += 5) {
      const row = document.createElement("div");
      row.className = "slot-row";
      for (let j = i; j < i + 5; j++) {
        const slot = document.createElement("div");
        slot.className = "slot";
        slot.dataset.index = j;

        const savedImage = localStorage.getItem(`slotImg${j}`);
        if (savedImage) {
          const img = document.createElement('img');
          img.src = savedImage;
          slot.appendChild(img);
        }

        const input = document.createElement("input");
        input.type = "file";
        input.accept = "image/*";
        input.className = "hidden-file-input";

        input.addEventListener("change", () => {
          const file = input.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
              localStorage.setItem(`slotImg${j}`, e.target.result);
              slot.innerHTML = "";
              const img = document.createElement("img");
              img.src = e.target.result;
              slot.appendChild(img);
            }
            reader.readAsDataURL(file);
          }
        });

        slot.addEventListener("click", () => input.click());

        let pressTimer;
        slot.addEventListener("mousedown", () => {
          pressTimer = setTimeout(() => {
            if (slot.querySelector("img")) {
              const removeBtn = document.createElement("button");
              removeBtn.textContent = "Remover";
              removeBtn.style.position = "absolute";
              removeBtn.style.bottom = "5px";
              removeBtn.style.left = "5px";
              removeBtn.style.background = "red";
              removeBtn.style.color = "white";
              removeBtn.addEventListener("click", () => {
                localStorage.removeItem(`slotImg${j}`);
                slot.innerHTML = "";
              });
              slot.appendChild(removeBtn);
            }
          }, 1000);  // Aguardar 1 segundo para abrir o botão de remover
        });

        slot.addEventListener("mouseup", () => {
          clearTimeout(pressTimer);
        });

        row.appendChild(slot);
      }
      container.appendChild(row);
    }
  </script>
</body>
</html>
